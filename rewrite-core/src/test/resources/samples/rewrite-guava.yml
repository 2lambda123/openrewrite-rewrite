#
# Copyright 2020 the original author or authors.
# <p>
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# <p>
# https://www.apache.org/licenses/LICENSE-2.0
# <p>
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

---
# profiles that contain definitions only
profile: guava-29.0

define:
  org.openrewrite.guava:
    ServiceManagerAddListener:
      - java.InsertMethodArgument:
          method: 'com.google.common.util.concurrent.ServiceManager addListener(
            com.google.common.util.concurrent.ServiceManager.Listener)'
          pos: 1
          source: MoreExecutors.directExecutor()
      - java.AddImport:
          type: com.google.common.util.concurrent.MoreExecutors

---
profile: guava-23.5

define:
  org.openrewrite.guava:
    FilesFileTraversal:
      - java.ChangeMethodTargetToStatic:
          from: com.google.common.io.Files fileTreeTraversal()
          to: com.google.common.io.Files fileTraversal()
    MoreFilesFileTraversal:
      - java.ChangeMethodTargetToStatic:
          from: com.google.common.io.MoreFiles directoryTreeTraverser()
          to: com.google.common.io.MoreFiles directoryTraverser()

---
# ... and then a profile that extends from definition-only profiles and includes their rules
profile: guava

extend:
  - guava-29.0
  - guava-23.5

include:
  - org.openrewrite.guava.*
